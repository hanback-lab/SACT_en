# Secret Code(DoorLock) 3
---

## 8x1 4-Bit MUX

Display of 4-digit password and 4-digit key input for 7-segment array is required in the circuit.

We practiced 4 x 1 4-bit MUX for SEG_DISPLAY in the previous WATCH circuit.


<BR>

In this chapter, we will design a circuit of 8 x 1 4-bit MUX.

This circuit has the following structure.

<br>
<img src="./pds/mx.png" alt="scmp4_t-cmp4_" style="width: 40%;"><BR><BR>

Input value is transmitted to Q by SEL signal as shown below.
<br>

|SEL[2..0] | Q |
|:-:|:-:|
| 0 0 0 | A |
| 0 0 1 | B |
| 0 1 0 | C |
| 0 1 1 | D |
| 1 0 0 | E |
| 1 0 1 | F |
| 1 1 0 | G |
| 1 1 1 | H |

<BR>
Use 74157 used in the previous SEG_DISP circuit for 8x1 4-bit MUX circuit design.

<img src="./pds/mx02.png" alt="scmp4_t-cmp4_" style="width: 80%;"><BR><BR>


<BR>

To test this circuit, eight 4-bit inputs are required but there is no way for 32 inputs on the equipment. So, let’s check the result only through simulation.

<br>

### **Design**

1. Select File > New Project Wizard in Quartus to create new project.

2. Set Directory, Name, and Top-Level Entry window as below. 

    |Working Directory|d:\work\MUX8X1|
    |-|-|
    |project Name | MUX8X1|
    |Top Level Entry Name | MUX8X1|

3. Set Project Type to Empty project, and do not set Add File window.

4. In Family, Device&Board Setting window, first set Device Family/Package/Pin Count/Core speed grade as shown below, and then set Name.


    |Device Family|Cyclone 10 LP|
    |-|:-:|
    |Package|FBGA|
    |Pin count|484|
    |Core Speed grade|8|
    |Available devices|10CL080YF484C8G|

    <img src="./pds/cnt10_02.png" alt="traffic" style="width: 100%;"><br><br>

>Be careful that if device name changes, programming is not possible.

5. Do not set ‘EDA Tool Settings’.
Check Summary to confirm the current settings and click Finish to complete project creation.

6. Click File > New menu to open New window and select Block Diagram/Schematic File.

7. Right-click on the drawing and select Insert > Symbol menu (double-click on the drawing). Import symbol and complete the logic circuit as below.


    <img src="./pds/mx03.png" alt="traffic" style="width: 70%;"><br>
    - It is designed with 4-bit input ports of A, B, C, D, E, F, G, H and 4-bit output port of Q.
    
    - 3-bit SEL port is also designed for input port selection.
 
    <BR>    <BR>

    <img src="./pds/mx03a.png" alt="traffic" style="width: 70%;"><br>
    - A and B, C and D, E and F, G and H are selected by SEL[0] bit and output to TMPA, TMPB, TMPC, TMPD, respectively.
   
    <BR>    <BR>

    <img src="./pds/mx03b.png" alt="traffic" style="width: 70%;"><br>

    - TMPA and TMPB, TMPC and TMPD are selected by SEL[1] and output to STRA and STRB, respectively.

    <BR>    <BR>

    <img src="./pds/mx03c.png" alt="traffic" style="width: 70%;"><br>

    - STRA and STRB are selected by SEL[2] and output to the Q output port. 

    <BR>    <BR>
    
8. Save. Set file name to project name (default setting).

<br><br>

### **Compile**

9. Select Processing > Start Compilation menu to proceed with compilation.

    This is the process of checking for errors in the design and synthesizing/ generating timing information / generating programming file.


<br><br>

### **Simulation**

10. Once compilation is complete, start simulation.

    Select File > New and select “University Program VWF” under Verification/Debugging Files in New window that appears.

11. In Simulation Waveform Editor window, select Edit > Insert > Insert Node or Bus.

12. Press Node Finder button, press List button in Node Finder window, and press “>>” button in Nodes Found. Then, click OK button to add input/output port to Simulation Waveform Editor window.

13. In Simulation Waveform Editor window, set the value for input port as shown below and check the result.

<br>
    <img src="./pds/mx04.png" alt="traffic" style="width: 100%;"><br><br>

14. SAVE. Leave the file name as default.

15. Select Simulation > Simulation Setting menu and delete “ –novopt” in the window that appears.

    <img src="./pds/cnt10_14a.png" alt="traffic" style="width: 80%;"><br><br>

    >If this “-novopt’ is not deleted, the following message will appear upon the simulation.

    <img src="./pds/cnt10_14b.png" alt="traffic" style="width: 80%;"><br><br>


16. Select Simulation > Run Functional Simulation menu to run the simulation.

   <img src="./pds/mx05.png" alt="traffic" style="width: 100%;"><br><br>
    <br>

17. Check the output of the result by SEL selecting.


<br><br>
