# MOD-N Counter
---

## Theory

Controlled device usually requires a specific frequency clock to operate.

If the required frequencies cannot be provided externally, they are generated using central frequency. This logic circuit is called frequency counter.

This chapter describes how to design frequency counter used in actual logic circuit by applying the counter explained previously.

 

<br>

- **MOD-N counter**

The following figure is a state transition diagram showing the change in the data value of a 3-bit counter.

<br>

<img src="./pds/mc01.png" alt="p03" style="width: 40%;">

<br>

3-bit counter has 8 different states.

The number of logic state in the order of count is called mode (MOD) number. If it has 8 logical states, it is called MOD-8 counter. 

Number of MOD can be changed by the user.


<br>

In the circuit state transition diagram of 3-bit counter, design a circuit that changes directly to 000 without changing from 101 to 110 as below. 

This circuit is called MOD-6 counter because it has six logic states.


<img src="./pds/mc02.png" alt="p02" style="width: 40%;">

<br>

State that changes the value to 000 when in the state of 110 and 111 is drawn because flip-flops become unknown random state and appear in state, 110, 111 and so on when the power is supplied on logic circuit. 

So, compensation circuit needs to be added to solve this.

<br>


---
## **Practice Objectives **

Let's design and experiment with the circuit below.

<br>

<img src="./pds/mc03.png" alt="p03" style="width: 80%;">

<br>

In this circuit, square marking connects to BCD to 7-Segment decoder so as to display MOD-6 counter on 7-Segment. In result, the value counted from 0 to 5 on MOD-6 counter is displayed as a number in the first digit of 7-Segment.

Devices connected to check in SACT equipment are as below.
 


|CLK|Q2|Q1|Q0|
|:---:|:---:|:---:|:---:|
|SW7|LED7|LED6|LED5|

<br>

<img src="./pds/smct-mc.png" alt="smct-mc" style="width: 60%;">

<br>


### **Design**

1. Prepare project file <a href="./pds/MOD_6CNT.zip" download>MOD_6CNT.zip</a> for the experiment.  
<br>

2. Move the project compressed file downloaded to d:＼work and unzip it.

3. Run Quartus II and select File > Open Project.

4. Go to d:＼work＼ MOD_6CNT folder, where the files are unzipped, and open MOD_6CNT project.

5. Select File > Open to import MOD_6CNT.bdf file. Or double-click MOD_6CNT on the left side of the project.

6. Unfinished drawing is shown. Let's complete it with the drawing described before.  


<img src="./pds/mc05.png" alt="p05" style="width: 80%;"><br>

<img src="./pds/mc03.png" alt="p01" style="width: 80%;"><br>

7. Complete the circuit by importing “jkff” symbol, “7448” symbol, “nand2” symbol and connecting them with wire. 

<img src="./pds/mc06.png" alt="p08" style="width: 100%;"><br>

<br>


### **Compile**


8. Select File > Save and save, and select Processing > Start Compilation to compile.

    Compilation is process to verify that there are no errors in the designed logic circuit and create programming file and simulation file.


<br><br>


### **Simulation**

9. Select File > Open, and change File Type to All Files (.) in Open File window in the lower right corner, then select Waveform.vwf file.

10. In Waveform window, select Simulation > Run Functional Simulation to run it.


<img src="./pds/ex10.png" alt="p11" style="width: 70%;"><br>

<img src="./pds/mc08.png" alt="p10" style="width: 100%;"><br>
<br>

### **Check Hardware Operation**

11. Prepare SACT equipment. Connect USB cable and power cable and press the power switch to supply power to the device.

12. In Quartus software, select Tool > Programmer.

13. Check that USB Blaster is connected in Hardware Setup on Programmer window. Press Start button to program to check the operation on the device.

14. Operate button switch, slide switch and check output result on LED.

Devices connected to check in SACT equipment are as below.

|CLK|Q2|Q1|Q0|
|:---:|:---:|:---:|:---:|
|SW7|LED7|LED6|LED5|

<br>