# 4bit binary Adder / Subtractor
---
## Theory

Binary adder and subtractor practiced previously can perform addition and subtraction of binary number within a single circuit. 

The operation is performed based on the binary value contained in the control signal.

This device is one of the components of the arithmetic logic unit (ALU).


<br>

The circuit below implements the operation of adder and subtractor in a single circuit.

<br>
<img src="./pds/pas01.png" alt="p01" style="width: 80%;"><br>

<br>

In the above circuit, when M signal is 0, it operates as an adder, and when M signal is 1, it operates as a subtractor. 
 
It is configured so that the code is output and the general number is displayed.



<br>


---
## Practice Objectives

Let's design and experiment with the circuit below.

<br>

<img src="./pds/pas03.png" alt="p03" style="width: 80%;">




<br>

Devices connected to check in SACT equipment are as below.

|A3|A2|A1|A0|B3|B2|B1|B0||M|
|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
|S7|S6|S5|S4|S3|S2|S1|S0||SW7|

<br>

|COUT||S3|S2|S1|S0|
:---:|:---:|:---:|:---:|:---:|:---:|
|LED7||LED6|LED5|LED4|LED3|

<img src="./pds/sact-pas.png" alt="sact-pas" style="width: 60%;">

<br>



### Design

1. Prepare project file <a href="./pds/P_ADD_SUB.zip" download>P_ADD_SUB.zip</a> for the experiment.
<br>

2. Move the project compressed file downloaded to d:\work and unzip it.

3. Run Quartus II and select File > Open Project.

<br>

4. Go to d:\work\PAS folder, where the files are unzipped, and open PAS project.

<br>

5. Select File > Open to import PAS.bdf file. Or double-click PAS on the left side of the project.

<br>

6. Unfinished drawing is shown. Let's complete it with the drawing described before.

<img src="./pds/pas05.png" alt="p05" style="width: 80%;"><br>

<img src="./pds/pas03.png" alt="p01" style="width: 80%;"><br>

7. Double-click the drawing as shown below, or right-click the mouse and select Insert > Symbol.

<br>

8. Complete the circuit by importing “HAFA”, “xor” symbol in the symbol window and connecting them with wire. 

<img src="./pds/pas06.png" alt="p08" style="width: 80%;"><br>

※ HAFA is 1-bit full adder symbol used in the previous exercise.

<br>


### Compile

9. Select File > Save and save, and select Processing > Start Compilation to compile.

Compilation is process to verify that there are no errors in the designed logic circuit and create programming file and simulation file.

<br><br>


### Simulation

10. Select File > Open, and change File Type to All Files (.) in Open File window in the lower right corner, then select Waveform.vwf file.

11. In Waveform window, select Simulation > Run Functional Simulation to run it.

<img src="./pds/ex10.png" alt="p11" style="width: 70%;"><br>

<img src="./pds/pas08.png" alt="p10" style="width: 70%;"><br>
<br>

※ To change the simulation value, select the location to change by dragging the mouse as below.

<img src="./pds/pas08a.png" alt="p10" style="width: 70%;"><br>

Select the tool bar < ? .

<img src="./pds/pas08b.png" alt="p10" style="width: 30%;"><br>

Enter the value to change.

<img src="./pds/pas08c.png" alt="p10" style="width: 70%;"><br>

Changed result is shown as below.

<img src="./pds/pas08d.png" alt="p10" style="width: 70%;"><br>

If simulating as 11, you can check the result for the modified input value.

<img src="./pds/pas08e.png" alt="p10" style="width: 70%;"><br>
<br>


### Check Hardware Operation

12. Prepare SACT equipment. Connect USB cable and power cable and press the power switch to supply power to the device.

13. In Quartus software, select Tool > Programmer.

14. Check that USB Blaster is connected in Hardware Setup on Programmer window and press Start button to program, and check the operation of 4-bit adder/subtractor on the device.

<br>

15. Decide whether to operate it as adder or subtractor by moving the slide switch. Operate the button switch to input value, and check the result through LED.

|A3|A2|A1|A0|B3|B2|B1|B0||M|
|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
|S7|S6|S5|S4|S3|S2|S1|S0||SW7|

<br>

|COUT||S3|S2|S1|S0|
:---:|:---:|:---:|:---:|:---:|:---:|
|LED7||LED6|LED5|LED4|LED3|

<img src="./pds/sact-pas.png" alt="sact-pas" style="width: 60%;">

<br>


 









