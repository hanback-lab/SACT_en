# PISO (Parallel In Serial Out)
---

## 이론


병렬입력/직렬출력 레지스터는 N비트의 병렬 데이터의 입력을 받아, N개의 클럭 동안 입력 받은 병렬 데이터를 직렬 데이터로 변환하여 출력하는 레지스터를 말한다. 

이것은 다음 그림과 같이 블록도로 나타낼 수 있다. 

<img src="./pds/piso01.png" alt="p02" style="width: 40%;"><br>

<br>

다음 파형은 4비트 병렬입력/직렬출력 레지스터에 임의의 데이터를 넣어 동작하는 결과이다.

<br>

<img src="./pds/piso02.png" alt="p02" style="width: 70%;"><br>

<BR>

1. LOAD 신호가 1이고 CLK이 Rising Edge일 때, 값의 전달이 이루어진다. DATA SET 

2. 이 때 Q에는 D0의 값이 출력이 된다. 

3. LOAD 신호가 0이고 CLK이 Risng Edge일 때, 데이터의 시프트가 이루어저 입력 받은 N 비트의 D 데이터가 하위 비트에서부터 상위 비트의 순서대로(D1, … , DN-1, DN) Q에 출력된다. 

<br>

PISO 레지스터의 장점은 아래와 같다. 

- 효율적인 데이터 전송: PISO 레지스터는 병렬 데이터를 직렬로 변환하는 데 도움이 되며, 이는 직렬 통신 시스템에 매우 적합하다. 

- 간소화된 회로 설계: PISO 레지스터는 직렬로 이동하므로 필요한 데이터 라인이 줄어들어 회로 설계가 쉬어진다.

- 유연성: PISO 레지스터는 일반적으로 유연하며 데이터 폭이 한 애플리케이션에서 다른 애플리케이션으로 변경될 때에도 매우 적합하다.

- 고속 작동: 여러 비트가 한 번에 로드되고 한 번에 하나씩 이동되므로 고속 데이터 전송이 가능하다.

- 비용 효율성: PISO 레지스터는 여러 통신 라인이 필요 없기 때문에 구현된 시스템의 비용을 더욱 낮출 수 있다.


<br>


---
## **실습 목표 **

다음의 회로를 설계하여 실험해 보자.

<br>

<img src="./pds/piso03.png" alt="p03" style="width: 100%;">



<br>

SACT 장비에서 확인하기 위하여 연결된 장치는 다음과 같다. 

|LOAD|CLK|D3|D2|D1|D0|Q|
|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
|SW7|SW6|S7|S6|S5|S4|LED7|


<br>

<img src="./pds/sact-piso.png" alt="sact-piso" style="width: 60%;">

<br>


### **설계**

1. 실험을 위해 프로젝트 파일 <a href="./pds/PISO_4BIT.zip" download>PISO_4BIT.zip</a>을 준비한다. 
<br>

2. 다운로드된 프로젝트의 압축 파일을 d:\work 이동시킨 후, 압축을 푼다.

3. Quartus II를 실행키고, File> Open Project 메뉴를 선택한다. 

<br>

4. 위에서 압축을 푼 위치인, d:\work\PISO_4BIT 폴더로 이동 후,PISO_4BIT 프로젝트를 OPEN한다. 

<br>

5. File > Open 메뉴를 선택하여 PISO_4BIT.bdf 파일을 불러오거나, 프로젝트 왼쪽의 PISO_4BIT 부분을 마우스로 더블 클릭한다. 

<br>

6. 아래 그림과 같이 미완성된 도면이 보이는데, 실습 목표에서 설명한 도면으로 완성시키자. 

<img src="./pds/piso05.png" alt="p05" style="width: 100%;"><br>

<img src="./pds/piso03.png" alt="p01" style="width: 100%;"><br>

7. dff 심볼과 nand2 심볼을 불러오고, wire로 심볼을 연결시켜 회로를 완성시킨다.  

<img src="./pds/piso06.png" alt="p08" style="width: 100%;"><br>

<br>


### **컴파일**


8. File > Save 메뉴를 선택하여 저장하고, Processing > Start Compilation 메뉴를 선택하여 컴파일을 진행한다. 

이 컴파일 과정은 설계한 논리 회로에 오류가 없는 지를 검증하고, 프로그래밍 파일과 시뮬레이션 파일을 만드는 과정이다. 

<br><br>


### **시뮬레이션**

9. 컴파일 완료 후, File > Open 메뉴를 선택하고, 나타나는 Open File 창에서 오른쪽 아래 부분의 File Type을 All File(*.*)로 변경한 후, Waveform.vwf 파일을 선택한다. 

10. 아래 그림과 같이 Waveform 창에서, Simulation > Run Functiona Simulation 메뉴를 선택하여 Functional Simulation을 진행하여, 결과를 확인한다. 

<img src="./pds/ex10.png" alt="p11" style="width: 70%;"><br>

<img src="./pds/piso08.png" alt="p10" style="width: 100%;"><br>
<br>

### **하드웨어 동작 확인**

11. SACT 장비를 준비한다. USB 케이블과 파워 케이블을 연결하고, 전원 스위치를 눌러 장비에 전원을 인가시킨다. 

12. Quartus 소프트웨어에서 Tool > Programmer 메뉴를 선택한다.

13. Programmer창의 Hardware Setup이 USB Blaster가 연결되어 있는지 확인하고, Start 버튼을 눌러 프로그래밍 하고 장비에서 동작을 확인한다. 

<br>

14. 버튼 스위치와 슬라이드 스위치를 동작시키고, LED에서 결과를 확인해 보자. 



|LOAD|CLK|D3|D2|D1|D0|Q|
|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
|SW7|SW6|S7|S6|S5|S4|LED7|


<br>

<img src="./pds/sact-piso.png" alt="sact-piso" style="width: 60%;">

<br>